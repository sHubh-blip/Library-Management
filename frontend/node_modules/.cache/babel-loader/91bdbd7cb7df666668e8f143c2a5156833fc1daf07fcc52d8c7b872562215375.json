{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\susmita\\\\Desktop\\\\library database\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { FiUsers, FiBookOpen, FiAlertTriangle } from 'react-icons/fi';\nimport toast from 'react-hot-toast';\nimport api from '../api/client';\nimport StatCard from '../components/StatCard';\nimport StyledTable from '../components/StyledTable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [stats, setStats] = useState({\n    members: 0,\n    onLoan: 0,\n    overdue: 0\n  });\n  const [loadingStats, setLoadingStats] = useState(true);\n  const [popular, setPopular] = useState([]);\n  const [loadingPopular, setLoadingPopular] = useState(true);\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const [membersRes, booksRes, overdueRes] = await Promise.all([api.get('/members'), api.get('/books'), api.get('/reports/overdue')]);\n        const membersCount = membersRes.data.length;\n        const onLoanCount = booksRes.data.reduce((acc, b) => {\n          var _b$total_copies, _b$available_copies;\n          const total = (_b$total_copies = b.total_copies) !== null && _b$total_copies !== void 0 ? _b$total_copies : 0;\n          const available = (_b$available_copies = b.available_copies) !== null && _b$available_copies !== void 0 ? _b$available_copies : 0;\n          return acc + (total - available);\n        }, 0);\n        const overdueCount = overdueRes.data.length;\n        setStats({\n          members: membersCount,\n          onLoan: onLoanCount,\n          overdue: overdueCount\n        });\n      } catch (err) {\n        console.error('Failed to load stats from API, using demo data.', err);\n        // Fallback demo stats so the UI still looks populated\n        setStats({\n          members: 42,\n          onLoan: 12,\n          overdue: 3\n        });\n      } finally {\n        setLoadingStats(false);\n      }\n    };\n    const fetchPopular = async () => {\n      try {\n        const res = await api.get('/reports/popular');\n        setPopular(res.data);\n      } catch (err) {\n        console.error('Failed to load popular books from API, using demo data.', err);\n        // Fallback demo popular books\n        setPopular([{\n          book_id: 1,\n          title: '1984',\n          borrow_count: 27\n        }, {\n          book_id: 2,\n          title: 'To Kill a Mockingbird',\n          borrow_count: 19\n        }, {\n          book_id: 3,\n          title: \"Harry Potter and the Philosopher's Stone\",\n          borrow_count: 15\n        }]);\n      } finally {\n        setLoadingPopular(false);\n      }\n    };\n    fetchStats();\n    fetchPopular();\n  }, []);\n  const popularColumns = [{\n    key: 'title',\n    header: 'Title'\n  }, {\n    key: 'borrow_count',\n    header: 'Times Borrowed',\n    render: row => /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"inline-flex px-2 py-0.5 rounded-full bg-primary-50 text-primary-700 text-xs font-medium\",\n      children: row.borrow_count\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-semibold text-slate-900\",\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-slate-500\",\n        children: \"Overview of your library activity and quick stats.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"grid gap-4 md:grid-cols-3\",\n      children: [/*#__PURE__*/_jsxDEV(StatCard, {\n        icon: FiUsers,\n        label: \"Total Members\",\n        value: stats.members,\n        loading: loadingStats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: FiBookOpen,\n        label: \"Books on Loan\",\n        value: stats.onLoan,\n        tone: \"success\",\n        loading: loadingStats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: FiAlertTriangle,\n        label: \"Books Overdue\",\n        value: stats.overdue,\n        tone: \"danger\",\n        loading: loadingStats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-slate-900 mb-3\",\n        children: \"Top 5 Popular Books\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), loadingPopular ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-24 rounded-xl bg-white border border-slate-100 shadow-sm animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(StyledTable, {\n        columns: popularColumns,\n        data: popular,\n        getRowKey: row => row.book_id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"cvPpp8VFtRaFirtJckeMVNRF8Fw=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","FiUsers","FiBookOpen","FiAlertTriangle","toast","api","StatCard","StyledTable","jsxDEV","_jsxDEV","Dashboard","_s","stats","setStats","members","onLoan","overdue","loadingStats","setLoadingStats","popular","setPopular","loadingPopular","setLoadingPopular","fetchStats","membersRes","booksRes","overdueRes","Promise","all","get","membersCount","data","length","onLoanCount","reduce","acc","b","_b$total_copies","_b$available_copies","total","total_copies","available","available_copies","overdueCount","err","console","error","fetchPopular","res","book_id","title","borrow_count","popularColumns","key","header","render","row","className","children","fileName","_jsxFileName","lineNumber","columnNumber","icon","label","value","loading","tone","columns","getRowKey","_c","$RefreshReg$"],"sources":["C:/Users/susmita/Desktop/library database/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { FiUsers, FiBookOpen, FiAlertTriangle } from 'react-icons/fi';\r\nimport toast from 'react-hot-toast';\r\nimport api from '../api/client';\r\nimport StatCard from '../components/StatCard';\r\nimport StyledTable from '../components/StyledTable';\r\n\r\nfunction Dashboard() {\r\n  const [stats, setStats] = useState({\r\n    members: 0,\r\n    onLoan: 0,\r\n    overdue: 0,\r\n  });\r\n  const [loadingStats, setLoadingStats] = useState(true);\r\n  const [popular, setPopular] = useState([]);\r\n  const [loadingPopular, setLoadingPopular] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      try {\r\n        const [membersRes, booksRes, overdueRes] = await Promise.all([\r\n          api.get('/members'),\r\n          api.get('/books'),\r\n          api.get('/reports/overdue'),\r\n        ]);\r\n\r\n        const membersCount = membersRes.data.length;\r\n        const onLoanCount = booksRes.data.reduce((acc, b) => {\r\n          const total = b.total_copies ?? 0;\r\n          const available = b.available_copies ?? 0;\r\n          return acc + (total - available);\r\n        }, 0);\r\n        const overdueCount = overdueRes.data.length;\r\n\r\n        setStats({\r\n          members: membersCount,\r\n          onLoan: onLoanCount,\r\n          overdue: overdueCount,\r\n        });\r\n      } catch (err) {\r\n        console.error('Failed to load stats from API, using demo data.', err);\r\n        // Fallback demo stats so the UI still looks populated\r\n        setStats({\r\n          members: 42,\r\n          onLoan: 12,\r\n          overdue: 3,\r\n        });\r\n      } finally {\r\n        setLoadingStats(false);\r\n      }\r\n    };\r\n\r\n    const fetchPopular = async () => {\r\n      try {\r\n        const res = await api.get('/reports/popular');\r\n        setPopular(res.data);\r\n      } catch (err) {\r\n        console.error('Failed to load popular books from API, using demo data.', err);\r\n        // Fallback demo popular books\r\n        setPopular([\r\n          { book_id: 1, title: '1984', borrow_count: 27 },\r\n          { book_id: 2, title: 'To Kill a Mockingbird', borrow_count: 19 },\r\n          { book_id: 3, title: \"Harry Potter and the Philosopher's Stone\", borrow_count: 15 },\r\n        ]);\r\n      } finally {\r\n        setLoadingPopular(false);\r\n      }\r\n    };\r\n\r\n    fetchStats();\r\n    fetchPopular();\r\n  }, []);\r\n\r\n  const popularColumns = [\r\n    { key: 'title', header: 'Title' },\r\n    {\r\n      key: 'borrow_count',\r\n      header: 'Times Borrowed',\r\n      render: (row) => (\r\n        <span className=\"inline-flex px-2 py-0.5 rounded-full bg-primary-50 text-primary-700 text-xs font-medium\">\r\n          {row.borrow_count}\r\n        </span>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <header>\r\n        <h1 className=\"text-2xl font-semibold text-slate-900\">Dashboard</h1>\r\n        <p className=\"mt-1 text-sm text-slate-500\">\r\n          Overview of your library activity and quick stats.\r\n        </p>\r\n      </header>\r\n\r\n      <section className=\"grid gap-4 md:grid-cols-3\">\r\n        <StatCard\r\n          icon={FiUsers}\r\n          label=\"Total Members\"\r\n          value={stats.members}\r\n          loading={loadingStats}\r\n        />\r\n        <StatCard\r\n          icon={FiBookOpen}\r\n          label=\"Books on Loan\"\r\n          value={stats.onLoan}\r\n          tone=\"success\"\r\n          loading={loadingStats}\r\n        />\r\n        <StatCard\r\n          icon={FiAlertTriangle}\r\n          label=\"Books Overdue\"\r\n          value={stats.overdue}\r\n          tone=\"danger\"\r\n          loading={loadingStats}\r\n        />\r\n      </section>\r\n\r\n      <section>\r\n        <h2 className=\"text-lg font-semibold text-slate-900 mb-3\">Top 5 Popular Books</h2>\r\n        {loadingPopular ? (\r\n          <div className=\"h-24 rounded-xl bg-white border border-slate-100 shadow-sm animate-pulse\" />\r\n        ) : (\r\n          <StyledTable\r\n            columns={popularColumns}\r\n            data={popular}\r\n            getRowKey={(row) => row.book_id}\r\n          />\r\n        )}\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}